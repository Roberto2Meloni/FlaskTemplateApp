<!-- Sidebar -->
<div class="printhub-sidebar">
  <h3>
    <a
      href="{{ url_for('PrintHub.PrintHub_index') }}"
      style="color: inherit; text-decoration: none"
      >PrintHub</a
    >
  </h3>
  <ul class="sidebar-nav">
    <li>
      <a
        href="{{ url_for('PrintHub.PrintHub_index') }}"
        class="nav-link {% if not active_page or active_page == 'dashboard' %}active{% endif %}"
        data-page="dashboard"
      >
        <i class="bi bi-house-fill"></i>
        Dashboard
      </a>
    </li>
    <li>
      <a
        href="#"
        class="nav-link {% if active_page == 'calculator' %}active{% endif %}"
        data-page="calculator"
      >
        <i class="bi bi-calculator"></i>
        Berechner
      </a>
    </li>
    <li>
      <a
        href="{{ url_for('PrintHub.printHub_filaments') }}"
        class="nav-link {% if active_page == 'filaments' %}active{% endif %}"
        data-page="filaments"
      >
        <i class="bi bi-disc"></i>
        Filamente
      </a>
    </li>
    <li>
      <a
        href="{{ url_for('PrintHub.printHub_printers') }}"
        class="nav-link {% if active_page == 'printers' %}active{% endif %}"
        data-page="printers"
      >
        <i class="bi bi-printer"></i>
        3D Drucker
      </a>
    </li>
    <li>
      <a
        href="{{ url_for('PrintHub.printHub_energy_costs') }}"
        class="nav-link {% if active_page == 'energy' %}active{% endif %}"
        data-page="energy"
      >
        <i class="bi bi-lightning-charge"></i>
        Energie Kosten
      </a>
    </li>
    <li>
      <a
        href="{{ url_for('PrintHub.printHub_work_hours') }}"
        class="nav-link {% if active_page == 'work' %}active{% endif %}"
        data-page="work"
      >
        <i class="bi bi-clock"></i>
        Arbeitszeiten
      </a>
    </li>
    <li>
      <a
        href="#"
        class="nav-link {% if active_page == 'profit' %}active{% endif %}"
        data-page="profit"
      >
        <i class="bi bi-graph-up"></i>
        Gewinnmarge
      </a>
    </li>
    <li>
      <a
        href="#"
        class="nav-link {% if active_page == 'discounts' %}active{% endif %}"
        data-page="discounts"
      >
        <i class="bi bi-percent"></i>
        Rabatte
      </a>
    </li>
    <li>
      <a
        href="{{ url_for('PrintHub.printHub_overhead_profiles') }}"
        class="nav-link {% if active_page == 'overhead' %}active{% endif %}"
        data-page="overhead"
      >
        <i class="bi bi-gear"></i>
        Overhead
      </a>
    </li>
  </ul>
</div>

<script>
  // JavaScript fÃ¼r automatische aktive Seite basierend auf URL (Fallback)
  document.addEventListener("DOMContentLoaded", function () {
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll(".sidebar-nav .nav-link");

    // Entferne alle aktiven Klassen
    navLinks.forEach((link) => {
      link.classList.remove("active");
    });

    // Setze aktive Klasse basierend auf URL
    let activeSet = false;
    navLinks.forEach((link) => {
      const page = link.dataset.page;

      if (currentPath.includes("filaments") && page === "filaments") {
        link.classList.add("active");
        activeSet = true;
      } else if (currentPath.includes("calculator") && page === "calculator") {
        link.classList.add("active");
        activeSet = true;
      } else if (currentPath.includes("printers") && page === "printers") {
        link.classList.add("active");
        activeSet = true;
      } else if (currentPath.includes("energy") && page === "energy") {
        link.classList.add("active");
        activeSet = true;
      } else if (currentPath.includes("work") && page === "work") {
        link.classList.add("active");
        activeSet = true;
      } else if (currentPath.includes("profit") && page === "profit") {
        link.classList.add("active");
        activeSet = true;
      } else if (currentPath.includes("discounts") && page === "discounts") {
        link.classList.add("active");
        activeSet = true;
      } else if (currentPath.includes("overhead") && page === "overhead") {
        link.classList.add("active");
        activeSet = true;
      }
    });

    // Wenn keine spezifische Seite aktiv ist, setze Dashboard als aktiv
    if (!activeSet) {
      const dashboardLink = document.querySelector(
        '.nav-link[data-page="dashboard"]'
      );
      if (dashboardLink) {
        dashboardLink.classList.add("active");
      }
    }
  });
</script>

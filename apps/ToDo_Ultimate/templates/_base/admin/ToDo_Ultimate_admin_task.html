<div class="task-management-container">
  <div class="task-header">
    <h2><i class="bi bi-list-task"></i> Task Verwaltung</h2>
    <button class="btn-refresh" onclick="window.location.reload()">
      <i class="bi bi-arrow-clockwise"></i> Aktualisieren
    </button>
  </div>

  <div class="task-info-box">
    <div class="info-item">
      <span class="info-label">App:</span>
      <span class="info-value">{{ app_config.app_name }}</span>
    </div>
    <div class="info-item">
      <span class="info-label">Aktive Tasks:</span>
      <span class="info-value">{{ tasks|length }}</span>
    </div>
  </div>

  <div class="task-list">
    {% if tasks %}
    <table class="task-table">
      <thead>
        <tr>
          <th>Task ID</th>
          <th>Name</th>
          <th>Funktion</th>
          <th>N채chster Lauf</th>
          <th>Trigger</th>
          <th>Status</th>
          <th>Aktionen</th>
        </tr>
      </thead>

      <tbody>
        {% for task in tasks %}
        <tr data-task-id="{{ task.id }}">
          <td class="task-id" data-label="Task ID">{{ task.id }}</td>
          <td class="task-name" data-label="Name">{{ task.name }}</td>
          <td class="task-func" data-label="Funktion">{{ task.func }}</td>
          <td class="task-next-run" data-label="N채chster Lauf">
            {{ task.next_run }}
          </td>
          <td class="task-trigger" data-label="Trigger">{{ task.trigger }}</td>
          <td class="task-status" data-label="Status">
            {% if task.active %}
            <span class="status-badge status-active">
              <i class="bi bi-check-circle-fill"></i> Aktiv
            </span>
            {% else %}
            <span class="status-badge status-paused">
              <i class="bi bi-pause-circle-fill"></i> Pausiert
            </span>
            {% endif %}
          </td>
          <td class="task-actions" data-label="Aktionen">
            <button
              class="btn-action btn-run"
              onclick="runTask('{{ task.id }}')"
              title="Jetzt ausf체hren"
            >
              <i class="bi bi-play-fill"></i>
            </button>
            {% if task.active %}
            <button
              class="btn-action btn-pause"
              onclick="pauseTask('{{ task.id }}')"
              title="Pausieren"
            >
              <i class="bi bi-pause-fill"></i>
            </button>
            {% else %}
            <button
              class="btn-action btn-resume"
              onclick="resumeTask('{{ task.id }}')"
              title="Fortsetzen"
            >
              <i class="bi bi-play-circle-fill"></i>
            </button>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <div class="no-tasks-message">
      <i class="bi bi-inbox"></i>
      <p>Keine Tasks gefunden</p>
      <small>Es sind aktuell keine Tasks f체r diese App registriert.</small>
    </div>
    {% endif %}
  </div>
</div>
